# Spatial Plan Data Analysis

This project is a part of my thesis research on implementing LADM into the automated permit checks pipeline for the case study Estonia. It aims to analyze Estonian spatial plan data semantics using machine learning techniques.
![Screenshot 2024-06-11 211439](https://github.com/simaybtm/ML4Estonianplan/assets/72439800/5c6afccc-e558-493d-bb6d-4820b136e576)


## Overview

The main objective of this project is to extract insights from Estonian spatial plan layer names using data analysis and machine learning. The project involves several steps including data preprocessing, feature engineering, model training, and evaluation. Below is a snippet of the layer requirements for Estonian Detailed Plans.
![Screenshot 2024-06-11 211557](https://github.com/simaybtm/ML4Estonianplan/assets/72439800/9b4ad86b-7555-4fee-9f93-0fb35b54d2b2)

### Additional Step: Test Model Script

As an additional step to the main thesis research, a test model script (`_3_test_model.py`) has been integrated into the project. This script runs an FME script to extract input data from real Estonian spatial plan data, then generates synthetic data, creates a training model, and finally tests the input data against the model to predict layer names.

## Usage

### Step 1: Create Synthetic Data and Train Model
1. Run `model_creation.py` to generate synthetic data, create a training model, and save the predictions to `output.csv`.
    ```bash
    python model_creation.py
    ```
Below shows a snippet of an example `output.csv`.

![Screenshot 2024-06-11 212334](https://github.com/simaybtm/ML4Estonianplan/assets/72439800/e1aee827-53e4-4610-97d4-02139c82109e)

### Step 2: Execute Test Model Script (Optional)
1. Run `_3_test_model.py` to execute the FME script, generate synthetic data, and test the model against the input data extracted from real Estonian spatial plan data.
    ```bash
    python _3_test_model.py
    ```

## Scripts

### `model_creation.py`

This script combines the functionality of generating synthetic data and training the model. It calls `_1_create_synthetic_data.py` to generate the data and `_2_synthetic_model.py` to train the model using a pipeline with TF-IDF vectorization and a Support Vector Classifier (SVC). The trained model's predictions are saved to `output.csv`.

### `_1_create_synthetic_data.py`

This script is responsible for creating synthetic data based on predefined mappings of Estonian detailed planning semantics. It outputs the synthetic data in a CSV file, which is used as the training data for the machine learning model.

### `_2_synthetic_model.py`

This script handles the training of the machine learning model. It reads the synthetic data generated by `_1_create_synthetic_data.py`, combines relevant features, and trains a Support Vector Classifier (SVC) using TF-IDF vectorization. The trained model is saved to a file for later use.

### `_3_test_model.py`

This script tests the trained model against real input data extracted from Estonian spatial plan data. It runs an FME script to extract input data, generates predictions using the trained model, and compares the predicted layer names against the actual data. This step is optional and mainly for testing purposes.

### `fme2result.py`

This script integrates the entire process: running the FME script to extract input data, generating synthetic data, creating the training model, and testing the input data against the model. It serves as a comprehensive script to automate the workflow from data extraction to prediction.

## FME Scripts

### `ml.fmw`

This FME script creates the `input.csv` file for additional testing. It extracts input data from real Estonian spatial plan datasets for use in the machine learning model.

### `ml_after.fmw`

This FME script uses the `output.csv` generated by the model to compare the predicted layer names with the actual layer names from the dataset. This automates the process of verifying the accuracy of the predictions, eliminating the need for manual checks.

### Note on Data Privacy

For privacy reasons, the IFC datasets used in this project are not shared. The scripts provided in this repository are intended to read those datasets and perform the necessary data extraction and processing.

## Limits

This project works only for Estonian Detailed Plan data standards.

## Links

Main Thesis Research GitHub Repository: [link](https://github.com/simaybtm/xxx)

## License

This project is licensed under the MIT License - see the LICENSE file for details.

---

By following the above steps, you should be able to generate synthetic data, train a model, and predict layer names from Estonian spatial plan data. Ensure all scripts are in the same directory or correctly referenced to avoid import errors.
